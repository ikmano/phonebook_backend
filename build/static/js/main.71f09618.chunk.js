(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,n,t){e.exports=t(50)},50:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(19),c=t.n(o),u=t(6),l=t(2),i=t(4),d=t.n(i),m="/api/persons",f={getAll:function(){return d.a.get(m).then(function(e){return e.data})},add:function(e){return d.a.post(m,e).then(function(e){return e.data})},update:function(e,n){return d.a.put("".concat(m,"/").concat(e),n).then(function(e){return e.data})},discard:function(e){return d.a.delete("".concat(m,"/").concat(e)).catch(function(e){console.log("delete failed...")})}},s=function(e){var n=e.search,t=e.handleSearch;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},h=function(e){return r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange,required:!0})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange,required:!0})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},b=function(e){var n=e.filter,t=e.handleDelete;return r.a.createElement("div",null,n().map(function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return t(e.id)}},"Delete"))}))},g=function(e){var n=e.message,t=e.type;return null===n?null:r.a.createElement("div",{style:Object(u.a)({},{background:"rgba(163, 163, 162, 0.2)",fontSize:18,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:20},t)},n)},p=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),d=i[0],m=i[1],p=Object(a.useState)(""),w=Object(l.a)(p,2),v=w[0],E=w[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),C=O[0],S=O[1],y=Object(a.useState)(null),N=Object(l.a)(y,2),k=N[0],L=N[1],D=Object(a.useState)({color:"green"}),A=Object(l.a)(D,2),P=A[0],q=A[1];Object(a.useEffect)(function(){console.log("effect"),f.getAll().then(function(e){return o(e)})},[]),console.log("render",t.length,"persons");var x=function(){m(""),E("")},B=function(e,n){"fail"===n&&q({color:"red"}),L(e),setTimeout(function(){"fail"===n&&q({color:"green"}),L(null)},5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:k,type:P}),r.a.createElement(s,{search:C,handleSearch:function(e){S(e.target.value)}}),r.a.createElement("h3",null,"add new"),r.a.createElement(h,{addPerson:function(e){e.preventDefault();var n={},a=t.find(function(e){return e.name.toLowerCase()===d.toLowerCase()});a?window.confirm("".concat(a.name," is already added in phonebook, replace the old number with a new one?"))?(n={name:d,number:v},f.update(a.id,n).then(function(e){o(t.map(function(e){return e.id===a.id?Object(u.a)({},e,{number:v}):e})),B("".concat(d,"s number was updated"))}).catch(function(e){console.log("put failed..."),B("Information of ".concat(d," has already been removed from the server"),"fail"),o(t.filter(function(e){return e.name.toLowerCase()!==d.toLowerCase()}))}),x()):(alert("".concat(a.name," already exists.")),x()):(n={name:d,number:v,id:t.length+1},f.add(n).then(function(e){console.log(e),o(t.concat(n)),L("Added ".concat(d)),setTimeout(function(){L(null)},5e3)}),x())},newName:d,handleNameChange:function(e){m(e.target.value)},newNumber:v,handleNumberChange:function(e){E(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(b,{filter:function(){return t.filter(function(e){return e.name.toLowerCase().includes(C.toLowerCase())})},handleDelete:function(e){window.confirm("Delete ".concat(t.find(function(n){return n.id===e}).name," ?"))&&f.discard(e).then(function(){o(t.filter(function(n){return!(n.id===e)}))})}}))};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(p,null))}},[[20,2,1]]]);
//# sourceMappingURL=main.71f09618.chunk.js.map