{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Message.js","App.js","index.js"],"names":["baseUrl","services","getAll","axios","get","then","response","data","add","newObj","post","update","id","newObject","put","concat","discard","delete","catch","error","console","log","Filter","_ref","search","handleSearch","react_default","a","createElement","value","onChange","PersonForm","props","onSubmit","addPerson","newName","handleNameChange","required","newNumber","handleNumberChange","type","Persons","filter","handleDelete","map","result","key","name","number","onClick","Message","message","style","Object","objectSpread","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","_useState","useState","_useState2","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setSearch","_useState9","_useState10","setMessage","_useState11","color","_useState12","messageType","setMessageType","useEffect","length","resetInput","displayMessage","mssg","setTimeout","components_Message","components_Filter","event","target","components_PersonForm","preventDefault","find","person","toLowerCase","window","confirm","res","alert","components_Persons","includes","p","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.71f09618.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => axios.get(baseUrl).then((response) => response.data);\r\n\r\nconst update = (id, newObject) =>\r\n  axios.put(`${baseUrl}/${id}`, newObject).then((response) => response.data);\r\n\r\nconst add = (newObj) =>\r\n  axios.post(baseUrl, newObj).then((response) => response.data);\r\n\r\nconst discard = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`).catch((error) => {\r\n    console.log(\"delete failed...\");\r\n  });\r\n};\r\n\r\nconst services = { getAll, add, update, discard };\r\n\r\nexport default services;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ search, handleSearch }) => (\r\n  <div>\r\n    filter shown with <input value={search} onChange={handleSearch} />\r\n  </div>\r\n);\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.addPerson}>\r\n      <div>\r\n        name:{\" \"}\r\n        <input\r\n          value={props.newName}\r\n          onChange={props.handleNameChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input\r\n          value={props.newNumber}\r\n          onChange={props.handleNumberChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ filter, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      {filter().map((result) => (\r\n        <div key={result.id}>\r\n          {result.name} {result.number}\r\n          <button onClick={() => handleDelete(result.id)}>Delete</button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Message = ({ message, type }) => {\r\n  const messageStyle = {\r\n    background: \"rgba(163, 163, 162, 0.2)\",\r\n    fontSize: 18,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 20,\r\n  };\r\n  if (message === null) return null;\r\n  return <div style={{ ...messageStyle, ...type }}>{message}</div>;\r\n};\r\n\r\nexport default Message;\r\n","import React from \"react\";\n\nimport services from \"./services/persons\";\nimport { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Message from \"./components/Message\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [message, setMessage] = useState(null);\n  const [messageType, setMessageType] = useState({ color: \"green\" });\n\n  useEffect(() => {\n    console.log(\"effect\");\n    services.getAll().then((response) => setPersons(response));\n  }, []);\n  console.log(\"render\", persons.length, \"persons\");\n\n  const handleDelete = (id) => {\n    if (window.confirm(`Delete ${persons.find((p) => p.id === id).name} ?`)) {\n      services.discard(id).then(() => {\n        setPersons(persons.filter((person) => !(person.id === id)));\n      });\n    }\n  };\n\n  const resetInput = () => {\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const displayMessage = (mssg, type) => {\n    if (type === \"fail\") {\n      setMessageType({ color: \"red\" });\n    }\n    setMessage(mssg);\n    setTimeout(() => {\n      if (type === \"fail\") {\n        setMessageType({ color: \"green\" });\n      }\n      setMessage(null);\n    }, 5000);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    let newObj = {};\n    const target = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    );\n    if (target) {\n      if (\n        window.confirm(\n          `${target.name} is already added in phonebook, replace the old number with a new one?`\n        )\n      ) {\n        newObj = { name: newName, number: newNumber };\n        services\n          .update(target.id, newObj)\n          .then((res) => {\n            setPersons(\n              persons.map((person) =>\n                person.id === target.id\n                  ? { ...person, number: newNumber }\n                  : person\n              )\n            );\n            displayMessage(`${newName}s number was updated`);\n          })\n          .catch((error) => {\n            console.log(\"put failed...\");\n            displayMessage(\n              `Information of ${newName} has already been removed from the server`,\n              \"fail\"\n            );\n            setPersons(\n              persons.filter(\n                (person) => person.name.toLowerCase() !== newName.toLowerCase()\n              )\n            );\n          });\n        resetInput();\n      } else {\n        alert(`${target.name} already exists.`);\n        resetInput();\n      }\n    } else {\n      newObj = {\n        name: newName,\n        number: newNumber,\n        id: persons.length + 1,\n      };\n      services.add(newObj).then((res) => {\n        console.log(res);\n        setPersons(persons.concat(newObj));\n        setMessage(`Added ${newName}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n      resetInput();\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearch = (event) => {\n    setSearch(event.target.value);\n  };\n\n  const filterPhonebook = () =>\n    persons.filter((person) =>\n      person.name.toLowerCase().includes(search.toLowerCase())\n    );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} type={messageType} />\n      <Filter search={search} handleSearch={handleSearch} />\n      <h3>add new</h3>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons filter={filterPhonebook} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\n\nimport App from \"./App\";\n\nReactDOM.createRoot(document.getElementById(\"root\")).render(<App />);\n"],"sourceRoot":""}